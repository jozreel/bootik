$html(header);

<link rel="import" href="polymer/bower_components/ajax-parser/ajax-parser.html">
<link rel="import" href="polymer/bower_components/paper-material/paper-material.html">
<link rel="import" href="polymer/bower_components/paper-button/paper-button.html">
<link rel="import" href="polymer/bower_components/paper-input/paper-input.html">
<paper-material>

 <div style="width:100%; height:600px;">
$html(wysiwig);

<div style="width:300px; float:left;">
  
  
  <paper-input  name = "widgetid" id ="widgetid" label="pageid" disabled> </paper-input>
  <paper-input  name = "widgetname" id ="widgetname" label="Name"> </paper-input>
  
    <paper-button raised onclick="submitpage()" value="SUBMIT">submit</paper-button>
    
</div>
</div>
</paper-material>

<ajax-parser  id="ajp"  method="POST" jsonurl="/html/addwidget/"></ajax-parser>


<script> 

 sajax().readystate(function()
 {
    
 });
 function submitpage()
 {
   var elem = document.querySelectorAll('.mediadelete');
   
  // console.log(elem);
   var arrvals =[];
   var media = [];
   var str = document.getElementById("htm").innerHTML;
   str.replace(/\{{(\w+)\}}/g, function(x,k,v){
          //console.log(k);
				 if(arrvals.indexOf(k) ===-1)
         {
           if(k.match(/media/g))
           {
             console.log("bla");
             media.push(k);
           }
           else
            arrvals.push(k);
         }
         
         
     });
    // console.log('kokk');
     //console.log(media,arrvals);
     // console.log(elem);
   for(el in elem)
   {
     
    if(elem[el].parentElement !== undefined)
        elem[el].parentElement.removeChild(elem[el]);
     
   }
    
   sajax('#hdiv').setText(sajax('#htmld').html());
  // cass= encodeURI(sajax('#hdiv').html());
  /// console.log(decodeURI(cass));
 // var html = document.getElementById('htmld').innerHTML;
   var html = sajax('#hdiv').html();
  //var title = document.getElementById('title').value;
  var ajp = document.getElementById('ajcat');
  //var meta = document.getElementById('meta').value;
   var name= document.getElementById('widgetname').value;
   //var ebncd = encodeURI(html)
   //console.log(decodeURI(ebncd));
  var str= '{"htm":"'+encodeURI(html)+'","widgetname":"'+encodeURI(name)+'"}';
          document.querySelector('#ajp').jsonstring = str;
         document.querySelector('#ajp').rspelement  = document.getElementById("ptoast");
         
         document.querySelector('#ajp').respfunc=resp;
         document.querySelector('#ajp').submit=true;    
 }
  //function  resp(to)
  //{
  //  alert(to.success);
  //}
</script>	
$html(footer);